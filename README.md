src/
â”œâ”€â”€ app/                      # Next.js App Routerã®ãƒšãƒ¼ã‚¸æ§‹æˆ
â”‚   â”œâ”€â”€ (auth)/               # èªè¨¼é–¢é€£ãƒšãƒ¼ã‚¸
â”‚   â”‚   â”œâ”€â”€ login/page.tsx    # ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸
â”‚   â”‚   â”œâ”€â”€ register/page.tsx # æ–°è¦ç™»éŒ²ãƒšãƒ¼ã‚¸
â”‚   â”‚   â””â”€â”€ layout.tsx        # èªè¨¼ç³»ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”‚   â”‚
â”‚   â”œâ”€â”€ (courses)/            # ã‚³ãƒ¼ã‚¹ä¸€è¦§ãƒ»è©³ç´°
â”‚   â”‚   â”œâ”€â”€ page.tsx          # ã‚³ãƒ¼ã‚¹ä¸€è¦§ãƒšãƒ¼ã‚¸
â”‚   â”‚   â”œâ”€â”€ [id]/page.tsx     # ã‚³ãƒ¼ã‚¹è©³ç´°ãƒšãƒ¼ã‚¸
â”‚   â”‚   â””â”€â”€ layout.tsx        # ã‚³ãƒ¼ã‚¹ç”¨ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”‚   â”‚
â”‚   â”œâ”€â”€ (dashboard)/          # ç®¡ç†è€…ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
â”‚   â”‚   â”œâ”€â”€ page.tsx              # è¬›å¸«ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰TOP
â”‚   â”‚   â”œâ”€â”€ courses/page.tsx      # ã‚³ãƒ¼ã‚¹ç®¡ç†ãƒšãƒ¼ã‚¸
â”‚   â”‚   â”œâ”€â”€ courses/new/page.tsx  # æ–°è¦ã‚³ãƒ¼ã‚¹ç™»éŒ²ãƒšãƒ¼ã‚¸
â”‚   â”‚   â””â”€â”€ layout.tsx            # ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ç”¨ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”‚   â”‚
â”‚   â”œâ”€â”€ api/                      # APIãƒ«ãƒ¼ãƒˆï¼ˆNext.jsï¼‰
â”‚   â”‚   â”œâ”€â”€ stripe/webhook/route.ts # Stripe Webhook
â”‚   â”‚   â”œâ”€â”€ courses/route.ts         # ã‚³ãƒ¼ã‚¹å–å¾—API
â”‚   â”‚   â”œâ”€â”€ purchases/route.ts       # è³¼å…¥æ¨©é™ãƒã‚§ãƒƒã‚¯API
â”‚   â”‚
â”‚   â””â”€â”€ layout.tsx                # ã‚¢ãƒ—ãƒªå…¨ä½“ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”‚
â”œâ”€â”€ components/                   # UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ ui/                       # ãƒœã‚¿ãƒ³ãƒ»ãƒ¢ãƒ¼ãƒ€ãƒ«ãªã©æ±ç”¨UI
â”‚   â”œâ”€â”€ course/                   # ã‚³ãƒ¼ã‚¹é–¢é€£ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ auth/                     # èªè¨¼ç”¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ dashboard/                # ç®¡ç†ç”»é¢ç”¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚
â”œâ”€â”€ lib/                          # ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ»ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â”œâ”€â”€ supabase.ts               # Supabaseã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ stripe.ts                 # Stripeã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ clerk.ts                  # Clerkã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ auth.ts                   # èªè¨¼ãƒ­ã‚¸ãƒƒã‚¯
â”‚
â”œâ”€â”€ types/                        # TypeScriptå‹å®šç¾©
â”‚   â”œâ”€â”€ course.ts                 # ã‚³ãƒ¼ã‚¹å‹
â”‚   â”œâ”€â”€ user.ts                   # ãƒ¦ãƒ¼ã‚¶ãƒ¼å‹
â”‚
â””â”€â”€ config/                       # ç’°å¢ƒè¨­å®š
    â”œâ”€â”€ stripeConfig.ts           # Stripeè¨­å®š
    â”œâ”€â”€ supabaseConfig.ts         # Supabaseè¨­å®š


ğŸ“¦ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹æˆ (Supabase/PostgreSQL)

ğŸ—„ï¸ users
---------------------------------
- id: uuid (PK)               # ãƒ¦ãƒ¼ã‚¶ãƒ¼ID (Clerké€£æº)
- email: varchar              # ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹
- name: varchar               # ãƒ¦ãƒ¼ã‚¶ãƒ¼å
- role: enum('user', 'instructor') # ãƒ­ãƒ¼ãƒ«
- created_at: timestamp       # ç™»éŒ²æ—¥æ™‚

ğŸ—„ï¸ courses
---------------------------------
- id: uuid (PK)               # ã‚³ãƒ¼ã‚¹ID
- title: varchar              # ã‚³ãƒ¼ã‚¹ã‚¿ã‚¤ãƒˆãƒ«
- description: text           # ã‚³ãƒ¼ã‚¹èª¬æ˜
- price: integer              # ä¾¡æ ¼ï¼ˆ0ãªã‚‰ç„¡æ–™ï¼‰
- thumbnail_url: varchar      # ã‚µãƒ ãƒã‚¤ãƒ«ç”»åƒURL
- video_url: varchar          # å‹•ç”»URLï¼ˆSupabase Storageç­‰ï¼‰
- instructor_id: uuid (FK â†’ users.id) # è¬›å¸«ID
- created_at: timestamp       # ä½œæˆæ—¥æ™‚

ğŸ—„ï¸ purchases
---------------------------------
- id: uuid (PK)               # è³¼å…¥å±¥æ­´ID
- user_id: uuid (FK â†’ users.id)     # è³¼å…¥ã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼
- course_id: uuid (FK â†’ courses.id) # è³¼å…¥ã—ãŸã‚³ãƒ¼ã‚¹
- stripe_session_id: varchar        # Stripeã‚»ãƒƒã‚·ãƒ§ãƒ³ID
- status: enum('pending', 'completed', 'failed') # è³¼å…¥çŠ¶æ…‹
- created_at: timestamp             # è³¼å…¥æ—¥æ™‚

ğŸ—„ï¸ watch_history (ã‚ªãƒ—ã‚·ãƒ§ãƒ³)
---------------------------------
- id: uuid (PK)               # å±¥æ­´ID
- user_id: uuid (FK â†’ users.id)     # ãƒ¦ãƒ¼ã‚¶ãƒ¼ID
- course_id: uuid (FK â†’ courses.id) # ã‚³ãƒ¼ã‚¹ID
- last_watched_at: timestamp        # æœ€çµ‚è¦–è´æ—¥æ™‚


### ğŸŸ¢ æ©Ÿèƒ½è¦ä»¶ (MVP)

1ï¸âƒ£ ãƒ¦ãƒ¼ã‚¶ãƒ¼æ©Ÿèƒ½
--------------------
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ãƒ»ãƒ­ã‚°ã‚¤ãƒ³
    - Googleèªè¨¼ï¼ˆClerk Authä½¿ç”¨ï¼‰
    - Email/Passwordèªè¨¼ï¼ˆä»»æ„ãƒ»è¿½åŠ å¯ï¼‰
- å‹•ç”»ä¸€è¦§é–²è¦§
    - ç„¡æ–™ã‚³ãƒ¼ã‚¹ã¯èª°ã§ã‚‚è¦–è´å¯èƒ½
    - æœ‰æ–™ã‚³ãƒ¼ã‚¹ã¯è³¼å…¥å¾Œã®ã¿è¦–è´å¯èƒ½ï¼ˆæ¨©é™ç®¡ç†ã‚ã‚Šï¼‰
- ã‚³ãƒ¼ã‚¹è³¼å…¥
    - Stripe Checkoutã§æ±ºæ¸ˆ
    - Webhooké€£æºã§è³¼å…¥å¾Œã«è‡ªå‹•ã§è¦–è´æ¨©é™ã‚’ä»˜ä¸
- è¦–è´å±¥æ­´
    - è‡ªåˆ†ãŒè³¼å…¥ã—ãŸã‚³ãƒ¼ã‚¹ä¸€è¦§ã‚’ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰è¡¨ç¤º

2ï¸âƒ£ ç®¡ç†è€…ï¼ˆè¬›å¸«ï¼‰æ©Ÿèƒ½
--------------------
- ã‚³ãƒ¼ã‚¹ä½œæˆ
    - ã‚¿ã‚¤ãƒˆãƒ«ãƒ»èª¬æ˜ãƒ»ä¾¡æ ¼ãƒ»å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼ˆSupabase Storage or Cloudinaryï¼‰
- ã‚³ãƒ¼ã‚¹ç·¨é›†ãƒ»å‰Šé™¤
    - è¬›å¸«ãŒç™»éŒ²ã—ãŸã‚³ãƒ¼ã‚¹ã®ç®¡ç†
    - è¬›å¸«ã”ã¨ã«ä½œæˆãƒ»ç®¡ç†ã§ãã‚‹ï¼ˆè¬›å¸«æ¨©é™ãƒã‚§ãƒƒã‚¯ï¼‰

âœ… è¿½åŠ ã§è€ƒãˆã¦ãŠãã¨ä¾¿åˆ©ãªç‚¹
--------------------
- ğŸ¯ Row Level Security
    - Supabaseã®RLSã§ã€Œã“ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã ã‘ãŒã“ã®å‹•ç”»ã‚’è¦–è´ã§ãã‚‹ã€åˆ¶å¾¡
- ğŸ¯ å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«å®¹é‡
    - Supabaseç„¡æ–™æ ï¼ˆ2GBï¼‰ã‚’è¶…ãˆãã†ãªã‚‰Cloudinaryã«åˆ‡ã‚Šæ›¿ãˆå¯
- ğŸ¯ ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ
    - ã‚¹ãƒãƒ›è¦–è´ãŒå¤šã„ã®ã§æœ€åˆã‹ã‚‰ãƒ¢ãƒã‚¤ãƒ«ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã§


ã“ã®è¦ä»¶ãªã‚‰ã€
âœ… ç„¡æ–™æ ã ã‘ã§é–‹ç™ºãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤å¯èƒ½
âœ… SaaSæ¡ˆä»¶ã®å–¶æ¥­ã«ãã®ã¾ã¾ä½¿ãˆã‚‹
